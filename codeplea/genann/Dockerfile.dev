FROM alpine:latest

# 安装构建工具和依赖
RUN apk add --no-cache \
    build-base \
    make \
    gcc \
    musl-dev \
    linux-headers \
    gdb

# 设置工作目录
WORKDIR /app

# 复制源代码到容器中
COPY . .

# 默认命令：构建并运行测试
CMD ["make", "check"]

# 提供交互式shell的替代入口点
# 使用: docker run -it --rm genann-dev sh